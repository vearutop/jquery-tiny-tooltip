// https://github.com/vearutop/jquery-tiny-tooltip
(function(e){var t,n,r=e(window),i;e(document).mousemove(function(e){t=e.pageX;n=e.pageY});e.fn.tinyTooltip=function(s){this.each(function(){function y(){if(u){o=a=0;S()}else{o=a=1;w()}}function b(){if(!o&&!a||u){return}if(i&&i!==p){i.hide()}var s=r.width()/2,f=r.height()/2,c=n+(n-r.scrollTop()>f?-m-v.offsetBottom:v.offsetTop),h=t+(t-r.scrollLeft()>s?-g-v.offsetRight:v.offsetLeft);l.css({top:c+"px",left:h+"px"});if(v.classHidden){e(l).removeClass(v.classHidden)}else{l.show()}u=1;if("function"==typeof v.afterShow){v.afterShow()}i=p}function w(){x(b,v.showDelay)}function E(){if(!v.clickSwitch&&(o||a)){return}if(v.classHidden){e(l).addClass(v.classHidden)}else{l.hide()}if("function"==typeof v.afterHide){v.afterHide()}u=0}function S(){x(E,v.hideDelay)}function x(e,t){clearTimeout(f);f=setTimeout(e,t)}if(this.tinyTooltip){this.tinyTooltip[s](this);return}var o,u,a,f,l,c,h,p=this.tinyTooltip={};var d=e(this),v={content:d.attr("title"),clickSwitch:0,showDelay:300,hideDelay:500,className:"tooltip",classHidden:"",offsetTop:10,offsetBottom:20,offsetLeft:10,offsetRight:20,afterShow:0,afterHide:0};if(s.clickSwitch){v.showDelay=v.hideDelay=0}e.extend(v,s);d.attr("title","");l=e('<div class="'+v.className+" "+v.classHidden+'" style="position: absolute;"></div>');e("body").append(l);if(v.content instanceof jQuery){v.content.detach();l.append(v.content)}else{l.html(v.content)}var m=e(l).height(),g=e(l).width();E();if(v.clickSwitch){c=[[d,"click",y]]}else{c=[[l,"mouseover",function(){o=1;w()}],[d,"mouseover",function(){a=1;w()}],[d,"mouseout",function(){a=0;S()}],[l,"mouseout",function(){o=0;S()}]]}for(h=0;h<c.length;++h){c[h][0].bind(c[h][1],c[h][2])}p.detach=function(e){for(h=0;h<c.length;++h){c[h][0].unbind(c[h][1],c[h][2])}l.remove();delete p;delete e.tinyTooltip};p.show=function(){o=a=1;w()};p.hide=function(){o=a=0;S()}});return this}})(jQuery)